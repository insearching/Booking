var _i_=this._i_||function(){},_r_=this._r_||function(e){return e},_sp_=this._sp_||function(e){B.et.customGoal("cDPPESHbfNFVTAYZSQDZET",1),B.reportError({message:"SPDR function called - "+e},"SPDR")};_i_("a9a:769617c6"),B.define("hotel/utils/rooms-selected-copy",function(e){return _i_("a9a:bd29d3a5"),_r_(function(e,t){_i_("a9a:3f21c2be");var a,o="<strong>"+t+"</strong>";switch(1<e.length?"0":e[0]||"0"){case"29":a="hp_book_now_summary_holidayhomes";break;case"31":a="hp_book_now_summary_villas";break;case"1":a="hp_book_now_summary_apartments";break;case"17":a="hp_book_now_summary_chalet";break;case"19":a="hp_book_now_summary_bungalow";break;case"26":a="hp_book_now_summary_dorm_beds"}return _r_(a?B.jstmpl.translations(a,t,{b_count:o}):B.jstmpl.translations("hp_book_now_summary_room",t,{number_rooms:o}))})}),B.define("component/hotel/new-rooms-table/cheapest-seen-block",function(e,t,a){_i_("a9a:118af289");var r=e("jquery"),o=e("component"),n=B.require("search-config");function i(a,e){if(_i_("a9a:3eb493ef"),n.isGroupSearch)return _r_();var t=[B.env.b_ufi,B.env.b_checkin_date,B.env.b_checkout_date,+n.adults].join("_"),o={method:"GET",dataType:"json",url:"/is_cheapest",data:{hotel_id:B.env.b_hotel_id,search_key:t}};r.ajax(o).done(function(e){var t;_i_("a9a:24519ca5"),!e.b_first&&e.is_the_cheapest?((t=a.closest("tr").prev()).find(".hprt-table-cell-price").addClass("hprt-table-cheapest-block-arrow"),a.addClass("hprt-table-cheapest-block-banner-active"),a.closest("tr.js-hprt-cheapest-block-row").addClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.addClass("hprt-table-cheapest-block-active")):((t=a.closest("tr").prev()).find(".hprt-table-cell-price").removeClass("hprt-table-cheapest-block-arrow"),a.removeClass("hprt-table-cheapest-block-banner-active"),a.closest("tr.js-hprt-cheapest-block-row").removeClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.removeClass("hprt-table-cheapest-block-active")),_r_()}),_r_()}a.exports=o.extend({init:function(){_i_("a9a:1356e94d");var e=this.$el;i(e),r(window).bind("focus",function(){_i_("a9a:fb03e730"),i(e),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/room-upgrade-for-genius-block",function(e,t,a){_i_("a9a:2393a83d");var o=e("component");a.exports=o.extend({init:function(){_i_("a9a:8af45543");var e,t,a=this.$el;e=a,_i_("a9a:8c6d9129"),(t=e.closest("tr").prev()).find(".hprt-table-cell-price").addClass("hprt-table-cheapest-block-arrow"),t.find(".hprt-table-cell").not($(".hprt-table-cell-roomtype")).addClass("hprt-remove-top-border"),t.hasClass("hprt-table-last-row")&&e.addClass("rm-upgrd-block-border"),_r_(),a.closest("tr").prev().removeClass("hprt-table-cheapest-block"),a.closest("tr").prev().find(".hprt-table-cell-roomtype.-first").not($(".-last")).removeClass("droom_seperator"),$(".room-upgrade-row").find("td").removeClass("droom_seperator");var o=$(".room-upgrade-row");o.next().hasClass("js-hprt-room-upgrade-block-row")&&o.find("td").css("border-bottom","0"),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/lightbox",function(e,t,a){_i_("a9a:69a3b502");var o=e("component"),c=e("et"),d=e("jquery"),i=e("lightbox"),h=e("events"),b=B.require("ga-tracker"),p=e("hotel/rooms_table/lightbox/gallery"),_=e("querystring"),r={},n=0,u=!1,s=!1,l=!1,f=!1;function m(e){if(_i_("a9a:42b1771b"),(!s||!l||!f)&&e.data("room-id")){var t="RD"+e.data("room-id");r[t]?r[t]+=1:(r[t]=1,n+=1,s||(c.goal("hp_rt_roomtype_lightbox_opened"),s=!0)),!l&&1<r[t]&&(c.goal("hp_lightbox_opened_more_than_once"),l=!0),!f&&1<n&&(c.goal("hp_lightbox_opened_for_different_rooms"),f=!0)}_r_()}function g(o){return _i_("a9a:7f56bc9a"),_r_(function(){_i_("a9a:375c0c65");var e=o.data("room-id"),t=d("[name=RD"+e+"]").parents(".hprt-table-cell").first();if(!B.feature||!B.feature.transition||!B.env.b_has_maxotel_rooms)return _r_();if(!t.length)return _r_();!function(e){_i_("a9a:6268d6b0");var t="hprt-table-cell-roomtype--highlight";e.addClass(t),setTimeout(function(){_i_("a9a:a76a05f5"),e.removeClass(t),_r_()},500),_r_()}(t),function(e){_i_("a9a:853ed1b3");var t="roomType--highlight hprt-table-cell-roomtype--active";d(".hprt-table").find(".hprt-table-cell.-first").removeClass(t),e.addClass(t),_r_()}(t);var a=o.data("LightboxGallery");a&&a.pauseSlick&&a.pauseSlick(),b.trackEvent(b.hotelPageTracker,"Hotel: Lightbox closed","Click on close button"),location.hash="_",_r_()})}function v(t,e){_i_("a9a:4125f157");var a={customWrapperClassName:"hprt-lightbox--wrapper hprt-lightbox--two_column_layout",bOverflowVisible:!0,position:"dynamic",hideCallBack:g(t),trapFocus:!0};i.show(t,a),void 0!==B.env.EKdGNLOLOLOIXbdGUKCMeAeUC&&(c.track("EKdGNLOLOLOIXbdGUKCMeAeUC"),c.stage("EKdGNLOLOLOIXbdGUKCMeAeUC",B.env.EKdGNLOLOLOIXbdGUKCMeAeUC||0));var o=t.data("room-id"),r="room_"+o;location.hash=r;var n=t.find('[data-component="room-lightbox-async"]');n.data("RoomLightboxEventsBinded")||(n.data("RoomLightboxEventsBinded",!0),B.events.on(B.hotel.Events.RT.LIGHTBOX_LOADED_ASYNC,function(e){_i_("a9a:eede5d9b"),o==e.roomId&&e.success&&(k(t),i.rePosition(),setTimeout(function(){_i_("a9a:e05bf8ef"),i.rePosition(),_r_()},250)),_r_()})),n.length?n.first().component("room-lightbox-async").load():k(t),t.data("firstRoom")&&c.stage("ZdfbdKUcbWZAPQORHe",1),_r_()}function k(e){_i_("a9a:e69f955f");var t=e.data("room-id"),a=e.find(".hprt-lightbox-gallery-container");if(a.length&&!a.hasClass("slicked")){a.addClass("slicked");var o=new p(a);e.data("LightboxGallery",o),a.find('[data-gallery=""]').one("click.tracking",function(){_i_("a9a:e62b85de"),c.goal("hp_lb_gallery_clicks_photo"),_r_()});var r=a.find(".hp-gallery-control");r.on("click.tracking",function(e){_i_("a9a:67de6dcb"),e.hasOwnProperty("originalEvent")&&(c.goal("hp_lb_gallery_clicks_arrows"),r.off("click.tracking")),_r_()}),a.find("a.js-hotel-thumb").one("mouseenter.tracking click.tracking",function(){_i_("a9a:ccce1eb9"),c.goal("hp_lb_gallery_used_thumbs"),_r_()}),m(e)}else(o=e.data("LightboxGallery"))&&o.playSlick&&o.playSlick(),a.length&&m(e);var n=e.find(".inline-feedback_lightbox");if(n.length){var i=0<e.find(".b-button_primary").length,_=parseInt(n.data("opened_count"));_?_+=1:_=1,n.data("opened_count",_),(2<_||!i)&&n.removeClass("g-hidden")}h.off("feedbackInline:close_lightbox").on("feedbackInline:close_lightbox",y),h.trigger(B.hotel.Events.RT.LIGHTBOX_OPEN_NEW,t,e);var s=d('a.hprt-roomtype-link[href="#RD'+t+'"]');if(0<s.length){var l=s.data("room-name");l&&b.trackEvent(b.hotelPageTracker,"Hotel: Lightbox opened",l)}setTimeout(function(){_i_("a9a:4c6707db");try{if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var e=document.createEvent("CustomEvent");e.initEvent("scroll",!1,!1),window.dispatchEvent(e)}}catch(e){}_r_()},100),u||isNaN(t)||(u=!0,d.ajax({method:"POST",dataType:"json",url:"/hotel_lightbox_opened",data:{hotel_id:B.env.b_hotel_id,room_id:t}})),_r_()}function y(){_i_("a9a:4fb8ca4d"),i.hide(),_r_()}a.exports=o.extend({init:function(e){_i_("a9a:0d84b96a");var t=this.$el,a=t.data("room-id");setTimeout(function(){_i_("a9a:e2ea9c6a"),function(e){_i_("a9a:c71d4121");var t=e.data("room-id"),a=_.parseUrl(location.href).query.activeTab;if(1==location.hash.indexOf("room")&&(a=location.hash.slice(1)),!a)return _r_();var o=a.match(/room_([0-9]*)_?.*/);if(!o||o.length<2||!o[1])return _r_();t==o[1]&&v(e),_r_()}(t),_r_()},500);var o=d('.hprt-roomtype-link[data-room-id="'+a+'"]');if(!o.length)return _r_();o.click(function(e){_i_("a9a:1d611caf"),e.preventDefault(),v(t),_r_()});var r=d(".gr-toggle-room-lightbox");if(r.length)for(var n=0;n<r.length;n++)o.attr("href")===d(r[n]).attr("href")&&d(r[n]).bind("click",function(e){_i_("a9a:b20c48b2"),e.preventDefault(),v(t),_r_()});var i=d(".main-gallery-toggle-room-lightbox");if(i.length)for(n=0;n<i.length;n++)o.data("roomId")===d(i[n]).data("roomId")&&d(i[n]).bind("click",function(e){_i_("a9a:7d6ceceb"),e.preventDefault(),v(t,d(this).data("isGroupRecommendation")),_r_()});_r_()},show:v}),_r_()}),B.define("component/hotel/new-rooms-table/summary/best-price",function(e,t,a){_i_("a9a:0a221858");var o=e("component"),r=e("hotel/store"),n=e("jstmpl"),i=/^bbasic_\d+$/i;a.exports=o.extend({init:function(){_i_("a9a:99ce5d6f"),r.subscribe(function(){_i_("a9a:81698e02");var e=r.getState().roomsTable.js_selection,t=$(".hp_rt_attr_msg");1==B.env.b_is_group_search?2==e.fitStatus?this.toggleJackpotMessage(e,t):this.$el.hide():this.toggleJackpotMessage(e,t),_r_()}.bind(this)),_r_()},toggleJackpotMessage:function(e,t){_i_("a9a:b47aa7ec");var a=i.test(e.blockIDs[0]||"");if(1!=e.roomCount||2!=e.blocks[e.blockIDs[0]].b_stay_prices.length||a)0<e.roomCount?(this.$el.text(B.jstmpl.translations("hp_rt_jackpot_best_price")),this.$el.show(),t.length&&t.show()):(this.$el.hide(),this.$el.text(""),t.length&&t.hide());else{var o="",r=e.roomTypes[0];-1!==["1","29","31","17","19","26"].indexOf(r)?(o="1"===r?n.translations("pss_rt_jackpot_last_room_dehotelise_apt"):"29"===r?n.translations("pss_rt_jackpot_last_room_dehotelise_hh"):"31"===r?n.translations("pss_rt_jackpot_last_room_dehotelise_villa"):n.translations("pss_rt_jackpot_last_room_dehotelise_option"),this.$el.text(o)):this.$el.text(B.jstmpl.translations("hp_rt_jackpot_last_room")),this.$el.show(),t.length&&t.show()}_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/breakfast-included",function(e,t,a){_i_("a9a:2f389531");var o=e("component"),r=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:2addfa3a"),r.subscribe(function(){_i_("a9a:58aa2e40");var t=r.getState().roomsTable.js_selection;0<t.roomCount&&t.blockIDs.every(function(e){return _i_("a9a:5758ec47"),_r_("breakfast"===t.blocks[e].b_mealplan_included_name)})?this.$el.show():this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/no-free-cancellation",function(e,t,a){_i_("a9a:f356b893");var o=e("component"),_=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:60e1bc34"),_.subscribe(function(){_i_("a9a:9b0b864c");var a=_.getState().roomsTable.js_selection,e=a.blockIDs.reduce(function(e,t){return _i_("a9a:4b0072e8"),"non_refundable"===a.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0),t=$(".js-hprt__booking-summary__non-free-wrapper"),o=a.blockIDs.reduce(function(e,t){return _i_("a9a:76b7c3bd"),"special_condition"===a.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0);if(0<e||0<o){var r=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body"),n=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free_with_free"),i=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free");t.removeClass("g-hidden"),1===a.roomCount?this.$el.html(r):a.blockIDs.length-e-o!=0?this.$el.html(n):this.$el.html(i),$(".continue_header").removeClass("g-hidden"),this.$el.removeClass("g-hidden")}else $(".continue_header").addClass("g-hidden"),this.$el.addClass("g-hidden"),t.addClass("g-hidden");_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/conditions",function(e,t,a){_i_("a9a:38bdd228");var o=e("component"),r=e("hotel/store"),n=/^bbasic_\d+$/i;a.exports=o.extend({init:function(){_i_("a9a:6560dad0"),r.subscribe(function(){_i_("a9a:39ef1d1a");var e=r.getState().roomsTable.js_selection;if(1!==e.roomCount||e.blocks[e.blockIDs[0]].b_is_fflex_price_point||n.test(e.blockIDs[0]||""))this.$el.html("");else{var t=$('tr[data-block-id="'+e.blockIDs[0]+'"]').find(".hprt-conditions").clone();t.removeClass("hprt-conditions").addClass("hprt-conditions-summary"),t.find(".jq_tooltip").removeClass("jq_tooltip").removeAttr("data-title title"),t.find(".green_condition").removeClass("green_condition"),t.find(".hprt-green-condition").removeClass("hprt-green-condition"),t.find(".hprt-checkmark-condition").removeClass("hprt-checkmark-condition"),t.find(".hprt-special-condition").removeClass("hprt-special-condition"),t.find("svg.hprt-cc-superflex").attr("fill","#383838"),e.blocks[e.blockIDs[0]].b_genius_free_room_upgrade&&t.find(".room-upgrade-condition").css("display","list-item"),this.$el.html("<div><strong>"+B.jstmpl.translations("bp_res_column_details")+"</strong>"+$("<div />").append(t).html()+"</div>")}_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/reservation-cta",function(e,t,a){_i_("a9a:478a2956");var o=e("component"),r=e("et"),n=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:08657b43");var o=this.$el.find(".js-reservation-button");n.subscribe(function(){_i_("a9a:0654756e");var t=n.getState().roomsTable.js_selection,e=t.blockIDs.some(function(e){return _i_("a9a:619f830f"),_r_(t.blocks[e].b_rate_is_genius)}),a=t.blockIDs.filter(function(e){return _i_("a9a:1ab254b5"),_r_(t.blocks[e].b_genius_free_room_upgrade)});t.blockIDs.some(function(e){return _i_("a9a:5b2e9176"),_r_(t.blocks[e].b_business_package_match)})&&r.customGoal("VOffSLNULFHOHRCTeMeRGWLEcLcDOJaYO",2),t.blockIDs.some(function(e){return _i_("a9a:442891d5"),_r_(t.blocks[e].b_rate_is_cug_business_rate)})&&t.blockIDs.length<2&&(e=!1),a.length&&a.length===t.blockIDs.length?o.html(B.jstmpl.translations("genius_free_room_upgrade_rt_cta")):e?o.html(B.jstmpl.translations("ge_deepen_rt_book_genius_cta")):o.html(B.jstmpl.translations("hp_rt_book_button_reserve")),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/dont-worry",function(e,t,a){_i_("a9a:70e9a9fd");var o=e("component");a.exports=o.extend({init:function(){if(_i_("a9a:e187fbe1"),this.$el.data("alwaysVisible"))return this.$el.text(B.jstmpl.translations("bp_dont_worry_message")),_r_();var a=e("hotel/store");a.subscribe(function(){_i_("a9a:202db018");var t=a.getState().roomsTable.js_selection,e=t.blockIDs.every(function(e){return _i_("a9a:152e49a4"),_r_(t.blocks[e].b_book_now_pay_later)});0<t.roomCount&&e?this.$el.text(B.jstmpl.translations("bp_dont_worry_message")):this.$el.text(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/genius-challenge",function(e,t,a){_i_("a9a:28b75cee");var o=e("component"),r=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:782b405e"),r.subscribe(function(){_i_("a9a:965b4fb9"),r.getState().roomsTable.js_selection.roomCount?this.$el.show():this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/fade",function(e,t,a){_i_("a9a:54bac72c");var n=e("server-data"),i=e("jquery"),o=e("component"),_=e("hotel/store");if(B.env.fe_show_new_genius_identity)var s="hprt-block--genius-room-selected-new";else s="hprt-block--genius-room-selected";var l="hprt-block--room-selected";a.exports=o.extend({init:function(){_i_("a9a:e8209eae"),_.subscribe(function(){_i_("a9a:30e74349");var t=_.getState().roomsTable.js_selection;this.$el.removeClass(l),this.$el.removeClass(s),0<t.roomCount&&(t.blockIDs.some(function(e){return _i_("a9a:e11750d1"),_r_(1===t.blocks[e].b_rate_is_genius)})&&1===parseInt(n.brand_selected_rooms_genius)?this.$el.addClass(s):this.$el.addClass(l));var e=".roomType--highlight",a=i(".hprt-table").find(".hprt-table-cell.-first");if(a.length&&a.filter(e).length){var o=a.filter(e).find("[name^=RD]");if(o&&o.length&&t.roomIDs&&t.roomIDs.length){var r=o.attr("name").replace("RD","");r&&-1==t.roomIDs.indexOf(r)&&a.removeClass("roomType--highlight hprt-table-cell-roomtype--active")}}_r_()}.bind(this)),_r_()}}),_r_()}),booking.jstmpl("template_reserve_button_tooltip",function(){_i_("a9a:df47d087");var i,_=["\n    <div class='big_tooltip_x'>\n        <h1>","</h1>\n\n        <p>\n            <strong>\n                ","\n                    ",", ","\n                ","\n            </strong>\n            <br />\n        </p>\n\n        <hr/>\n\n        <p>\n            <strong>","/private/bp_dates_num_nights_1/name","</strong><br />\n        </p>\n\n        <p>\n            ","/private/check_in/name",": </span>","\n        </p>\n\n        <p>\n            ","/private/check_out/name","\n        </p>\n    </div>\n\n    <div class='big_tooltip_message'>\n        ","\n          ","/private/genius_free_room_upgrade_rt_applied/name","\n        ","\n            ","/private/ge_boost_hp_rt_reserve_button_hover_nongenius/name","/private/hp_rt_reserve_hover_no_account_2_minutes/name","\n    </div>\n\n    ",'\n            <div class="big_tooltip_message big_tooltip_message__green pay_later">\n                ',"/private/hp_rt_pay_at_property/name","\n            </div>\n        ","\n    ","\n\n"],s=["b_hotel_name","b_room_details","b_name","b_interval","b_checkin_localized_date_with_weekday","b_checkout_localized_date_with_weekday","b_only_genius_room_upgrade_selected","b_user_auth_level","b_all_rooms_have_pay_later","b_is_lightbox"];return _r_(function(e){_i_("a9a:f6a6c7ca");var t="",a=this.fn;t+=[_[0],a.F.html(a.MC(s[0])),_[1]].join("");var o=a.MC(s[1])||[];e.unshift(null);for(var r=1,n=o.length;r<=n;r++)e[0]=o[r-1],t+=[_[2],a.F.html(a.MC(s[2]))].join(""),a.MJ(r==o.length)||(t+=_[3]),t+=_[4];return e.shift(),t+=[_[5],(e.unshift({num_nights:a.MC(s[3])}),i=a.ME(_[6],a.MB,a.MN,a.MO(a.MC(s[3]),null,_[6])),e.shift(),i),_[7],a.ME(_[8],a.MB,a.MN,null),_[9],a.MC(s[4]),_[10],a.ME(_[11],a.MB,a.MN,null),_[9],a.MC(s[5]),_[12]].join(""),a.MD(s[6])?t+=[_[13],a.ME(_[14],a.MB,a.MN,null),_[15]].join(""):a.MD(s[7])?t+=[_[16],a.ME(_[17],a.MB,a.MN,null),_[15]].join(""):t+=[_[16],a.ME(_[18],a.MB,a.MN,null),_[15]].join(""),t+=_[19],a.MK(a.MC(s[9]))&&(t+=_[15],a.MD(s[8])&&(t+=[_[20],a.ME(_[21],a.MB,a.MN,null),_[22]].join("")),t+=_[23]),t+=_[24],_r_(t)})}()),B.define("hotel/rooms-table/reserve-button-tooltip",function(e){_i_("a9a:696ed86b");var t=e("jquery"),n=e("hotel/store"),i=t(".js-reservation-button"),_=i.attr("data-title"),s=B.jstmpl("template_reserve_button_tooltip"),l={};n.subscribe(function(){_i_("a9a:ebb1c9aa");var t=n.getState().roomsTable.js_selection,e=t.roomIDs.map(function(e){return _i_("a9a:1285ba3b"),_r_(t.rooms[e])}),a=t.blockIDs.filter(function(e){return _i_("a9a:434aeffc"),_r_(t.blocks[e].b_genius_free_room_upgrade)}),o=a.length&&a.length===t.blockIDs.length;if(i.removeAttr("id").removeAttr("data-tooltip-class"),0<t.roomCount){l={b_hotel_name:B.env.b_hotel_name,b_interval:B.env.b_checkin_checkout_interval,b_checkin_localized_date_with_weekday:B.formatter.date(B.env.b_checkin_date,"date_with_weekday"),b_checkout_localized_date_with_weekday:B.formatter.date(B.env.b_checkout_date,"date_with_weekday"),b_check_in_time_translated:B.env.b_check_in_time_translated,b_check_out_time_translated:B.env.b_check_out_time_translated,b_room_details:e,b_user_auth_level:B.env.auth_level,b_only_genius_room_upgrade_selected:o};var r=s.render(l);i.attr("data-title",r).attr("data-tooltip-class","submit_holder_button_tooltip")}else l={},i.attr("data-title",_);_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/rooms",function(e,t,a){_i_("a9a:905de923");var o=e("component"),r=e("hotel/utils/rooms-selected-copy"),n=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:6dc63c4b"),n.subscribe(function(){_i_("a9a:edb022a4");var e=n.getState().roomsTable.js_selection;0<e.roomCount?(this.$el.html(r(e.roomTypes,e.roomCount)+' <div class="hprt-reservation-total-price bui-price-display__value">'+e.totalPriceFormatted+"</div>"),this.$el.show()):this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/highlighted-facilities",function(e,t,a){_i_("a9a:27039646");var o=e("component"),r=e("et");a.exports=o.extend({init:function(){_i_("a9a:3095e98d"),this.$otherFacilities=this.$el.find(".hprt-facilities-others"),this.$accessibleFacilities=this.$el.find(".hprt-accessible-facilities"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:52126e88");var a=this.$otherFacilities,t=this.$accessibleFacilities;this.$el.on("click","[data-toggler]",function(e){_i_("a9a:2e58d938"),e.preventDefault();var t=$(e.target);a.toggle("fast",function(){_i_("a9a:c4abb4cf"),a.is(":visible")?(r.goal("hp_room_facilities_more"),t.text(B.jstmpl.translations("hp_rt_info_collapse"))):(r.goal("hp_room_facilities_less"),t.text(B.jstmpl.translations("hp_rt_loc_more"))),_r_()}),_r_()}),this.$el.on("click","[data-toggler-accessibility]",function(e){_i_("a9a:6f884709"),e.preventDefault(),$(e.currentTarget).toggleClass("accordion-open",!t.is(":visible")),t.toggle("fast"),$(e.currentTarget).blur(),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/unit-reviews",function(e,t,a){_i_("a9a:498f2634");var o=e("component"),r=e("et");a.exports=o.extend({init:function(){_i_("a9a:72cf34bd"),this.$unitScores=this.$el.find(".rt-unit-review-score"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:860e23f3");var t,e=this.$unitScores;this.$el.on("mouseenter",e,function(e){_i_("a9a:946cad78"),t=setTimeout(function(){_i_("a9a:5960d72e"),r.customGoal("OOFHFfZHQFLFESFDMfQLEHSYO",1),clearTimeout(t),_r_()},2e3),_r_()}),this.$el.on("mouseleave",e,function(e){_i_("a9a:6ed1c005"),clearTimeout(t),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-error-tooltip",function(e,t,a){_i_("a9a:1d1a6f7f");var o=e("component"),r=e("jquery"),n=e("hotel/store"),i=e("hotel/redux/actionTypes");a.exports=o.extend({init:function(){_i_("a9a:c6dade78");var a=this.$el,o=r(".hprt-nos-select");a.attr("role","alert"),r("#hprt-form").submit(function(e){if(_i_("a9a:60172861"),!n.getState().roomsTable.js_selection.roomCount){e.preventDefault();var t=o.filter(function(e,t){return _i_("a9a:3b0d9f03"),_r_(60<t.getBoundingClientRect().top)}).get(0)||o.get(0);a.insertAfter(t),a.show().animate({opacity:1},600),r(".hprt-table-room-select").addClass("hprt-table-cell-select-error"),window.setTimeout(function(){_i_("a9a:f6e93812"),a.animate({opacity:0},600,function(){_i_("a9a:ae99e185"),a.hide(),_r_()}),_r_()},4e3),n.dispatch({type:i.SELECT_ROOM_ERROR}),r("select[name^='nr_rooms_']").attr("disabled",!1)}_r_()}),n.subscribe(function(){_i_("a9a:162f178a"),n.getState().roomsTable.js_selection.roomCount&&r(".hprt-table-cell-select-error").removeClass("hprt-table-cell-select-error"),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-rooms",function(e,t,a){_i_("a9a:796a3279");var o=e("component"),r=e("hotel/redux/actionTypes"),l=e("et"),c=e("hotel/store"),d=e("hotel/new-rooms-table/fit-status-helper"),h=e("jquery"),b=B.require("announce-to-screen-reader"),p=e("hotel/utils/rooms-selected-copy");a.exports=o.extend({init:function(){_i_("a9a:6fbe7c47");var n=this.$el,i=n.data("room-id"),_=n.data("block-id"),s=n.parents("tr").find("td").not(":first");n.on("change",function(){var e;if(_i_("a9a:673a5f04"),e="1"===n.attr("data-is-fflex-selected")?n.attr("data-other-block-id"):n.attr("data-block-id"),c.dispatch({type:r.SELECT_ROOM,block_id:e,number_of_rooms:parseInt(n.val(),10),is_fflex_selected:n.attr("data-is-fflex-selected")}),1==B.env.b_is_group_search&&d.update(),B.et.stage("INLGHPFKFPIMbIZDFC",2),B.et.track("BKPBOTfdASFNHWbOTdfdQRMFXJaGabaSVZOHYO")){var t=c.getState().roomsTable.js_selection;b.announce(p(t.roomTypes,t.roomCount)+" "+t.totalPriceFormatted)}_r_()}),c.subscribe(function(){_i_("a9a:d6e0e97d");var e=c.getState().roomsTable.js_selection;0<e.roomCount?(l.goal("hp_room_select"),203==+B.env.b_acc_type&&l.goal("hp_hostel_room_select")):0<e.nrSelections&&(l.goal("hp_rt_room_deselect"),203==+B.env.b_acc_type&&l.goal("hp_rt_hostel_room_deselect")),_=n.attr("data-block-id");var t=e.blocks[_];t?(n.val(t.js_nr_selected),t.js_is_highlighted?s.addClass("hprt-block--room-selected"):s.removeClass("hprt-block--room-selected")):s.removeClass("hprt-block--room-selected");var a=e.rooms[i];if(a&&a.b_has_room_inventory){var o=parseInt(n.val(),10),r=parseInt(a.b_blocks[0].b_nr_stays,10)+o-e.roomCountPerRoomID[a.b_id];n.find("option").each(function(){_i_("a9a:3910e429"),h(this).prop("disabled",this.value>r),_r_()})}else n.find("option").each(function(){_i_("a9a:7e9fbdbc"),h(this).prop("disabled",!1),_r_()});_r_()}.bind(this)),_r_()}}),_r_()}),B.define("hotel/rooms-table",function(e){_i_("a9a:6df288af");var s=e("jquery"),l=e("hotel/store"),r=e("booking-sticker"),t=!1,n=!1;function a(){_i_("a9a:e76b1620");var e=new r,t=new r,a=new r,o={};B.env.b_hp_sticky_offset&&(o.initialOffset=B.env.b_hp_sticky_offset),B.et.track("BKPBOTfdASFNHWbOTdfdQRMFXJaGabaSVZOHYO")?B.events.once("fake-header-loaded",function(){_i_("a9a:57812311"),n||(n=!0,e.init(".hprt-table thead",".hprt-table",o),a.init(".fake-header.js-fake-header","#hprt-table",{noStacking:!0}),t.init(".js-hprt-reservation-summary > .reserve-block-js","#hprt-table",o)),_r_()}):(e.init(".hprt-table thead",".hprt-table",o),t.init(".hprt-table-cell.-last > .hprt-block",".hprt-table-cell.-last",o)),_r_()}"hotel"===B.env.b_action&&B.env.b_bookings_owned&&B.env.b_rooms_available_and_soldout&&(0<s(".hprt-table tbody tr").length&&(a(),l.subscribe(function(){_i_("a9a:86af2c2c"),window.setTimeout(r.update,5),window.setTimeout(r.update,10),_r_()}),2===r.stickedElements.length&&(t=!0)),B.events.on("main-tab-opened",function(){_i_("a9a:8a28ab5f"),t||a(),_r_()})),e("hotel/rooms-table/reserve-button-tooltip"),s(".hprt-filter-button").click(function(e){_i_("a9a:e0582287");var t=l.getState(),a=!1;s(this).hasClass("hprt-is-filter-clicked")?(s(this).removeClass("hprt-is-filter-clicked"),a=!0):s(this).addClass("hprt-is-filter-clicked");for(var o=0;o<t.roomsTable.rooms.length;o++)for(var r=t.roomsTable.rooms[o].b_blocks,n=0;n<r.length;n++)switch(s(this).attr("data-filter-type")){case"occupancy":B.et.customGoal("IaaVGGeaQDSFKUddVCUC",2),s(this).attr("data-filter-value")!=r[n].b_max_persons&&s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:bfc9090c"),a?s(this).find(".can-be-filtered").removeClass("hprt-greyout-occupancy"):s(this).find(".can-be-filtered").addClass("hprt-greyout-occupancy"),_r_()});break;case"meal":B.et.customGoal("IaaVGGeaQDSFKUddVCUC",3);var i=s("#hprt-bundle-filter").attr("data-filters-applied")?s("#hprt-bundle-filter").attr("data-filters-applied").split(","):[];a?-1<(_=i.indexOf(s(this).attr("data-filter-value")))&&i.splice(_,1):i.includes(s(this).attr("data-filter-value"))||i.push(s(this).attr("data-filter-value")),0<i.length&&(!r[n].b_mealplan_included_name&&!i.includes("room")||r[n].b_mealplan_included_name&&!i.includes(r[n].b_mealplan_included_name))?s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:bab5d2ba"),s(this).find(".can-be-filtered").addClass("hprt-greyout-meal"),_r_()}):s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:4d016975"),s(this).find(".can-be-filtered").removeClass("hprt-greyout-meal"),_r_()}),s("#hprt-bundle-filter").attr("data-filters-applied",i.join());break;case"policy":var _;B.et.customGoal("IaaVGGeaQDSFKUddVCUC",4),i=s("#hprt-bundle-filter").attr("data-policy-filters-applied")?s("#hprt-bundle-filter").attr("data-policy-filters-applied").split(","):[],a?-1<(_=i.indexOf(s(this).attr("data-filter-value")))&&i.splice(_,1):i.includes(s(this).attr("data-filter-value"))||i.push(s(this).attr("data-filter-value")),0<i.length&&("not_refundable_anymore"==r[n].b_cancellation_type&&!i.includes("non_refundable")||"not_refundable_anymore"!=r[n].b_cancellation_type&&!i.includes(r[n].b_cancellation_type))?s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:37828a65"),s(this).find(".can-be-filtered").addClass("hprt-greyout-policy"),_r_()}):s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:7aee62a9"),s(this).find(".can-be-filtered").removeClass("hprt-greyout-policy"),_r_()}),s("#hprt-bundle-filter").attr("data-policy-filters-applied",i.join())}_r_()}),s("#hprt-form").submit(function(e){var t;_i_("a9a:556943e8");var a=l.getState();if(!a.roomsTable.js_selection.roomCount||!a.roomsTable.rooms)return _r_();t=[];for(var o=[],r=0;r<a.roomsTable.rooms.length;r++){for(var n=-1,i=0;i<a.roomsTable.rooms[r].b_blocks.length;i++)a.roomsTable.js_selection.blocks[a.roomsTable.rooms[r].b_blocks[i].b_block_id]&&(n=i);a.roomsTable.rooms[r].b_blocks.some(function(e){return _i_("a9a:3e86e245"),_r_(a.roomsTable.js_selection.blocks[e.b_block_id])})&&t.push(r+1),-1!=n&&o.push(n+1)}t.length&&s(this).find("input[name=rt_pos_selected]").val(t.join("_")),o.length&&s(this).find("input[name=rt_pos_selected_within_room]").val(o.join("_")),s("select[name^='nr_rooms_']").filter(function(){return _i_("a9a:f0558075"),_r_(0==s(this).val())}).attr("disabled",!0),_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/genius-room-upgrade",function(e,t,a){_i_("a9a:69c9c2da");var o=e("component"),r=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:f177a66f"),r.subscribe(function(){_i_("a9a:4659c403");var e=r.getState().roomsTable.js_selection,a=0,o=0;1<=e.roomCount?($.each(e.blocks,function(e,t){_i_("a9a:7e4b44ec"),t.b_genius_free_room_upgrade?a=1:o=1,_r_()}),a&&o?this.$el.html('<div class="urgency_message_red"><strong>'+B.jstmpl.translations("genius_free_room_upgrade_rt_multiple")+"</strong></div>"):this.$el.html("")):this.$el.html(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.when({action:"hotel",events:"load",condition:function(e){return _i_("a9a:33adf6d0"),_r_(e.fe_blckprtfldls)}}).run(function(e){_i_("a9a:ed3e7f82");var a=e("jquery"),o=e("report-error"),r=e("hotel/store"),n=a("#hprt-form"),i=function(e){_i_("a9a:e7859192");var t=n.find('input[name="'+e+'"]');if(t.length)return _r_(t);return _r_(a('<input type="hidden" name="'+e+'" />').appendTo(n))}("soup");!function(){_i_("a9a:5249b0ad");var t=0;r.subscribe(function(){_i_("a9a:806ea865");var e=r.getState().roomsTable.js_selection;e.roomCount&&e.totalPrice&&e.totalPrice!==t&&function(e){_i_("a9a:cfd80619");var t=function(t){_i_("a9a:21a7c465");try{return _r_(btoa(t))}catch(e){o("Rooms Table: send-hashed-price-to-bp - Failed to encode price: "+t,e)}return _r_(!1)}(e);t&&i.val(t),_r_()}(t=e.totalPrice),_r_()}.bind(this)),_r_()}(),_r_()}),B.define("component/hotel/new-rooms-table/highlighted-row",function(e,t,a){"use strict";_i_("a9a:cf5f88e5"),booking.jstmpl("hprt_row_highlight_block",function(){_i_("a9a:b3131def");var r,n=["\n        ",'\n<div class="hprt-table-cell__highlight-border">\n\t<div class="hprt-table-cell__highlight-block">\n\t\t\n\t\t<span class="hprt-table-cell__highlight-block-logo">\n\t\t\t',"iconset/briefcase","small","\n\t\t</span>\n\n\t\t\n\t\t","\n\t\t\n\t\t\n\t\t",'\n\t\t\t<span\n\t\t\t\tclass="hprt-table-cell__highlight-block-info"\n\t\t\t\tdata-component="tooltip"\n\t\t\t\tdata-tooltip-text="','"\n\t\t\t>\n\t\t\t\t',"iconset/info_sign","medium","\n\t\t\t<span>\n\t\t","\n\t</div>\n</div>\n","\n    "],i=["fe_content","fe_tooltip"];return _r_(function(e){_i_("a9a:08637e0c");var t,a="",o=this.fn;return a+=n[0],t=a,_i_("a9a:973f0d08"),t+=[n[1],(e.unshift({name:n[2],size:n[3]}),r=o.HELPER("icon",e[0]),e.shift(),r),n[4],o.MC(i[0]),n[5]].join(""),o.MD(i[1])&&(t+=[n[6],o.MC(i[1]),n[7],(e.unshift({name:n[8],size:n[9]}),r=o.HELPER("icon",e[0]),e.shift(),r),n[10]].join("")),t+=n[11],a=_r_(t),a+=n[12],_r_(a)})}());var o=e("component"),r=e("jstmpl"),n=e("jquery");a.exports=o.extend({init:function(){_i_("a9a:900aa151");var e=this;e.$cells=e.$el.find(".js--hprt-table-cell-highlight"),e.createHighlightBlock(),e.$cells.first().prepend(e.$highlightBlock),setTimeout(function(){_i_("a9a:a7ce801a"),e.$cells.addClass("hprt-table-cell--highlight-block-active"),_r_()},1),_r_()},createHighlightBlock:function(){_i_("a9a:26887bb5");var e=0;this.$cells.each(function(){_i_("a9a:78ee4909"),e+=n(this).outerWidth(),_r_()}),this.$highlightBlock||(this.$highlightBlock=n(r("hprt_row_highlight_block").render({fe_content:this.$el.data("highlight-content"),fe_tooltip:this.$el.data("highlight-tooltip")})).loadComponents()),this.$highlightBlock.css({width:e}),_r_()}}),_r_()}),B.require("hotel/rooms-table"),_r_();